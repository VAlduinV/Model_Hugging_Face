# TECHNICAL_ANALYSIS.md

Нижче — узагальнений **технічний аналіз** по всіх згенерованих артефактах та зображеннях, з чітким поясненням різниць між режимами.

---

## (a) Класифікація текстів (Hugging Face `pipeline`)

**Дані:** FastText-розмітка (`__label__1/2`). Тестовий набір ~400k рядків.  
**Моделі:** `distilbert-base-uncased-finetuned-sst-2-english`, `textattack/roberta-base-SST-2`.

### Метрики (Accuracy / Precision / Recall / F1)
| Model                                           |   Accuracy |   NEG_P |   NEG_R |   NEG_F1 |   POS_P |   POS_R |   POS_F1 |   Support |
|:------------------------------------------------|-----------:|--------:|--------:|---------:|--------:|--------:|---------:|----------:|
| textattack/roberta-base-SST-2                   |     0.9422 |  0.9219 |  0.9661 |   0.9435 |  0.9644 |  0.9182 |   0.9407 |    400000 |
| distilbert-base-uncased-finetuned-sst-2-english |     0.8983 |  0.8804 |  0.9218 |   0.9006 |  0.918  |  0.8747 |   0.8958 |    400000 |

**Лідер:** **textattack/roberta-base-SST-2** з accuracy **94.22%**. Відрив від другого — **4.39 п.п.**  
**Що це означає на практиці:** RoBERTa краще відтворює межу класів на великому корпусі відгуків — вища *recall* та *F1* по **обох** класах означає менше пропусків негативів і стабільніше виявлення позитивів.

**Типові помилки (з досвіду на такому корпусі):**
- **Двозначні формулювання** (“not bad”, “could be better”) — моделі коливаються, частіше помиляється легша DistilBERT.
- **Довгі списки характеристик** з міксованою тональністю — падає *precision*, бо заголовна тональність розмивається.
- **Доменні слова/сленг** (ігрові/технічні терміни) — без додаткового донавчання моделі іноді надмірно позитивні/негативні.

**Продуктивність:** для 400k зразків рекомендується `--device 0` і `--batch 64–128` (RTX 4060 Ti має вистачити). На CPU інференс буде годинами.

---

## (b) Українські моделі (zero-shot, сумаризація, переклад)

**Zero-shot (uk):** головний клас — **позитивний** зі score ≈ **0.830**.  
**Summarization (uk):** результат компактно відтворює суть новини про випробування БПЛА: *У Києві відбуваються випробування нового безпілотника, який здатний виконувати автономні місії.*  
**Translation:**  
- uk→en: *This is a very interesting album with powerful waxes and great energy, and I recommend quality music to all.*  
- en→uk: *Цей альбом має вражаючі голоси і велику енергію. Я дуже рекомендую його всім фанатам якісної музики.*  

**Висновок:** XNLI-моделі (`xlm-roberta`, `mDeBERTa`) коректно працюють у zero-shot для укр. текстів; mT5 — адекватно сумаризує; OPUS-MT забезпечує базову якість перекладу у два боки.

---

## (c) Diffusers — аналіз зображень і різниці між режимами

Усі приклади лежать у твоєму проєкті за відносними шляхами (як у README):

- **[text2img](outputs/task_c/text2img.png)** — *з нуля* синтезується сцена відповідно до промпта.  
  **Ознаки:**  
  - Композиція створена заново: перспективна вулиця, висотки, неонові контури.  
  - Домінує узгоджена колірна палітра (бірюзові/рожеві неони), повторювані патерни ліній — типовий стиль моделі.  
  - Дрібні елементи (вивіски, вікна) — стилізовані, але семантичні деталі (текст на вивісках) нечитабельні — звична вада SD‑моделей.
  
- **[img2img](outputs/task_c/img2img.png)** — *стилізація на основі вхідного зображення*.  
  **Чим відрізняється від text2img:**  
  - **Зберігається макро-композиція** початкового кадру (лінія дороги, розташування будівель, силуети авто), але все перерисовано у неоновій естетиці.  
  - Параметр `--strength` керує ступенем зміни: при ~0.6 зберігається “кістяк”, проте фактура/кольори повністю оновлені.  
  - Видно **узгодженість геометрії** зі стартовим зображенням (кут перспективи, пропорції), якої не гарантує text2img.
  
- **[inpaint](outputs/task_c/inpaint.png)** — *локальна заміна за маскою*.  
  **Специфіка і відмінності:**  
  - Модель **поважає незамасковані області**: те, що чорне на масці, залишається без змін; білі зони перегенеруються.  
  - Добре підходить для точкових правок: заміна неба, дорисовування об’єктів, ретуш.  
  - На межі маски іноді помітні **стикувальні артефакти** (світлові ореоли/контурні розбіжності) — це нормальна особливість, зменшується корекцією маски, більшею кількістю кроків (`--steps`) або легким блюром країв маски.

### Зведене порівняння режимів
| Режим | Вхід | Що контролюємо | Що зберігається | Типові артефакти |
|---|---|---|---|---|
| text2img | лише текстовий промпт | сюжет, стиль через `--prompt`, `--guidance`, `--steps` | нічого (повна генерація) | текст на вивісках, дрібні деталі, інколи перспектива |
| img2img | промпт + початкове зображення | ступінь зміни через `--strength` | макро-композиція та силуети | «пластиковість», надмірна стилізація при великому `--strength` |
| inpaint | промпт + зображення + маска | локальність правки (білим — де генерувати) | незамасковані ділянки 1:1 | шви по краях маски, різниця у зерні/світлі |

---

## Рекомендації

- Для репродюсованості фіксуй `--seed` і зберігай промпти разом із результатами.  
- Якщо потрібна читабельна типографіка на вивісках — або використай спеціалізовані моделі (SDXL Instruct, DeepFloyd IF), або роби **inpaint** по текстових зонах з окремим промптом.  
- У (a) для ще кращих метрик — дай тонке донавчання (few epochs) на твоєму `train.ft.txt` для обох моделей і порівняй з “ванільними” пайплайнами.

---

> Цей документ описує саме ті зображення, що збережені у `outputs/task_c/*.png`, та метрики із `summary.json` / `uk_models_demo.json`.
